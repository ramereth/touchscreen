<!--
    menu.html
    
        This is a temporary menu document that will send commands to the message
        server.
-->
<html>
    <head>
        <style>
            * {
                font-family: sans-serif;
                margin:0;
                padding:0;
            }
            
            body {
                background-image:url('{{MEDIA}}/images/background-gray-2x1.gif');
            }
            
            .button {
                color:white;
                height:124px;
                padding-top:100px;
                padding-left:7px;
                padding-right:24px;
                position:absolute;
                text-align:center;
                width:194px;
            }
            
            .button_red {background-image:url('{{MEDIA}}/images/menu/buttons/button-red.png')}
            .button_blue {background-image:url('{{MEDIA}}/images/menu/buttons/button-blue.png')}
            .button_green {background-image:url('{{MEDIA}}/images/menu/buttons/button-green.png')}
            .button_yellow {background-image:url('{{MEDIA}}/images/menu/buttons/button-yellow.png')}
            .button_orange {background-image:url('{{MEDIA}}/images/menu/buttons/button-orange.png')}
            .button_purple {background-image:url('{{MEDIA}}/images/menu/buttons/button-purple.png')}
            
            #header {
                padding: 20px;
            }
            
            #slideshow {
                color:white;
                float:right;
                font-weight:bold;
                text-align:center;
            }
            
            #slideshow img {
                margin:15px 35px 0 0;
            }
            
            #status {
                background-color:black;
                border-bottom:1px solid white;
                border-top:1px solid white;
                height:50px;
            }
            
            #status_color {
                background-color:black;
                position:absolute;
                height:50px;
                width:100%;
            }
            
            #status_text {
                color:white;
                font-size:30px;
                font-family: sans-serif;
                margin:10px 0 0 20px;
                position:absolute;
                width:100%;
            }
            
            #back {
                color: white;
                position: absolute;
                top: 200px;
                border: 1px solid red;
            }
            
            #menus {
                height:784px;
                overflow:hidden;
                position:absolute;
                top:240px;
                width:1240px;
            }
            
            #center {
                background-color:red;
                margin-left:auto;
                margin-right:auto;
                width:1px;
                height:600px;
            }
            
        </style>
        
        <script type='text/javascript' src="{{MEDIA}}/js/jquery-1.4.min.js"></script>
        <script type="text/javascript" src="{{MEDIA}}/js/raphael-min.js"></script>
        <script type="text/javascript" src="{{MEDIA}}/js/cufon-yui.js"></script>
        <script type="text/javascript" src="{{MEDIA}}/js/osl_500.font.js"></script>
        <script type="text/javascript">
        
            // Easing equation, borrowed from jQuery easing plugin
            // http://gsgd.co.uk/sandbox/jquery/easing/
            jQuery.easing.easeOutQuart = function (x, t, b, c, d) {
                    return -c * ((t=t/d-1)*t*t*t - 1) + b;
            };
        
            /* ===============================
             *  Menu Animations
             * =============================== */
        
            var spacing = 75;
            var width = 1280;
            var buttonWidth = 200;
            var x0 = 0 - buttonWidth - spacing-75;
            var x1 = width + spacing;
        
            function init($menu){
                switch($menu.children().length) {
                    case 2:
                        init_2($menu);
                        break;
                    case 4:
                        init_4($menu);
                        break;
                    case 5:
                        init_5($menu);
                        break;
                    case 6:
                        init_6($menu);
                        break;
                    case 8:
                        init_8($menu);
                        break;
                    case 12:
                        init_12($menu);
                        break;
                }
            }
            
            function init_4($menu) {
                $children = $menu.children()
                $children.slice(0,2).css('top', 100)
                $children.slice(2).css('top', 390)
            }
            
            function init_5($menu) {
                $children = $menu.children()
                $children.slice(0,3).css('top', 100)
                $children.slice(3).css('top', 390)
            }
            
            function init_6($menu) {
                $children = $menu.children()
                $children.slice(0,3).css('top', 100)
                $children.slice(3).css('top', 390)
            }
            
            function init_8($menu) {
                $children = $menu.children()
                $children.slice(0,4).css('top', 100)
                $children.slice(4).css('top', 390)
            }
            
            function init_12($menu) {
                $children = $menu.children()
                $children.slice(0,4).css('top', 0)
                $children.slice(4,8).css('top', 280)
                $children.slice(8).css('top', 560)
            }
        
            function hide($menu){
                switch($menu.children().length) {
                    case 2:
                        hide_2($menu);
                        break;
                    case 4:
                        hide_4($menu);
                        break;
                    case 5:
                        hide_5($menu);
                        break;
                    case 6:
                        hide_6($menu);
                        break;
                    case 8:
                        hide_8($menu);
                        break;
                    case 12:
                        hide_12($menu);
                        break;
                }
            }
            
            function hide_2($menu) {
                $children = $menu.children()
                $($children[0]).animate({'left':x0}, 400);
                $($children[1]).animate({'left':x1}, 800);
            }
            
            function hide_4($menu) {
                $children = $menu.children()
                $($children[0]).animate({'left':x0}, 400);
                $($children[1]).animate({'left':x1}, 800);
                $($children[2]).animate({'left':x0}, 800);
                $($children[3]).animate({'left':x1}, 400);
            }
            
            function hide_5($menu) {
                $children = $menu.children()
                $($children[0]).animate({'left':x0}, 400);
                $($children[1]).animate({'left':x0}, 800);
                $($children[2]).animate({'left':x1}, 400);
                $($children[3]).animate({'left':x0}, 800);
                $($children[4]).animate({'left':x1}, 800);
            }
            
            function hide_6($menu) {
                $children = $menu.children()
                $($children[0]).animate({'left':x0}, 400);
                $($children[1]).animate({'left':x0}, 800);
                $($children[2]).animate({'left':x1}, 400);
                $($children[3]).animate({'left':x0}, 800);
                $($children[4]).animate({'left':x1}, 800);
                $($children[5]).animate({'left':x1}, 400);
            }
        
            function hide_8($menu) {
                $children = $menu.children()
                $($children[0]).animate({'left':x0}, 400);
                $($children[1]).animate({'left':x0}, 800);
                $($children[4]).animate({'left':x0}, 400);
                $($children[5]).animate({'left':x0}, 800);
                $($children[2]).animate({'left':x1}, 800);
                $($children[3]).animate({'left':x1}, 400);
                $($children[6]).animate({'left':x1}, 800);
                $($children[7]).animate({'left':x1}, 400);
            }
            
            function hide_12($menu) {
                $children = $menu.children()
                $($children[0]).animate({'left':x0}, 400, "easeOutQuart");
                $($children[4]).animate({'left':x0}, 400, "easeOutQuart");
                $($children[8]).animate({'left':x0}, 400, "easeOutQuart");
                $($children[1]).animate({'left':x0}, 800, "easeOutQuart");
                $($children[5]).animate({'left':x0}, 800, "easeOutQuart");
                $($children[9]).animate({'left':x0}, 800, "easeOutQuart");
                $($children[2]).animate({'left':x1}, 800, "easeOutQuart");
                $($children[6]).animate({'left':x1}, 800, "easeOutQuart");
                $($children[10]).animate({'left':x1}, 800, "easeOutQuart");
                $($children[3]).animate({'left':x1}, 400, "easeOutQuart");
                $($children[7]).animate({'left':x1}, 400, "easeOutQuart");
                $($children[11]).animate({'left':x1}, 400, "easeOutQuart");
            }
            
            function show($menu){
                switch($menu.children().length) {
                    case 2:
                        show_2($menu);
                        break;
                    case 4:
                        show_4($menu);
                        break;
                    case 5:
                        show_5($menu);
                        break;
                    case 6:
                        show_6($menu);
                        break;
                    case 8:
                        show_8($menu);
                        break;
                    case 12:
                        show_12($menu);
                        break;
                }
            }
            
            function show_2($menu) {
                L0 = (width/2)-(spacing/2)-buttonWidth;
                L1 = (width/2)+(spacing/2)
                $children = $menu.children();
                $($children[0]).animate({'left':L0}, 800);
                $($children[1]).animate({'left':L1}, 800);
            }
            
            function show_4($menu) {
                L0 = (width/2)-(spacing/2)-buttonWidth;
                L1 = (width/2)+(spacing/2)
                $children = $menu.children();
                $($children[0]).animate({'left':L0}, 400);
                $($children[1]).animate({'left':L1}, 800);
                $($children[2]).animate({'left':L0}, 800);
                $($children[3]).animate({'left':L1}, 400);
            }
            
            function show_5($menu) {
                L0 = (width/2)-spacing-(buttonWidth*1.5);
                L1 = (width/2)-(buttonWidth/2)
                L2 = (width/2)+spacing+(buttonWidth/2);
                L3 = (width/2)-(spacing/2)-buttonWidth;
                L4 = (width/2)+(spacing/2)
                
                $children = $menu.children();
                $($children[0]).animate({'left':L0}, 600);
                $($children[1]).animate({'left':L1}, 400);
                $($children[2]).animate({'left':L2}, 800);
                $($children[3]).animate({'left':L3}, 800);
                $($children[4]).animate({'left':L4}, 400);
            }
            
            function show_6($menu) {
                L0 = (width/2)-spacing-(buttonWidth*1.5);
                L1 = (width/2)-(buttonWidth/2);
                L2 = (width/2)+spacing+(buttonWidth/2);
                                
                $children = $menu.children();
                $($children[0]).animate({'left':L0}, 800);
                $($children[1]).animate({'left':L1}, 400);
                $($children[2]).animate({'left':L2}, 600);
                $($children[3]).animate({'left':L0}, 600);
                $($children[4]).animate({'left':L1}, 400);
                $($children[5]).animate({'left':L2}, 800);
            }
            
            function show_8($menu) {
                L0 = (width/2)-(spacing/2)-(2*buttonWidth+spacing);
                L1 = (width/2)-(spacing/2)-buttonWidth;
                L2 = (width/2)+(spacing/2)
                L3 = (width/2)+(spacing/2)+(buttonWidth+spacing);
                                
                $children = $menu.children();
                $($children[0]).animate({'left':L0}, 800, "easeOutQuart");
                $($children[1]).animate({'left':L1}, 400, "easeOutQuart");
                $($children[4]).animate({'left':L0}, 800, "easeOutQuart");
                $($children[5]).animate({'left':L1}, 400, "easeOutQuart");
                $($children[2]).animate({'left':L2}, 400, "easeOutQuart");
                $($children[3]).animate({'left':L3}, 800, "easeOutQuart");
                $($children[6]).animate({'left':L2}, 400, "easeOutQuart");
                $($children[7]).animate({'left':L3}, 800, "easeOutQuart");
            }
        
            function show_12($menu) {
                L0 = (width/2)-(spacing/2)-(2*buttonWidth+spacing);
                L1 = (width/2)-(spacing/2)-buttonWidth;
                L2 = (width/2)+(spacing/2)
                L3 = (width/2)+(spacing/2)+(buttonWidth+spacing);
                                
                $children = $menu.children();
                $($children[0]).animate({'left':L0}, 800, "easeOutQuart");
                $($children[4]).animate({'left':L0}, 800, "easeOutQuart");
                $($children[8]).animate({'left':L0}, 800, "easeOutQuart");
                $($children[1]).animate({'left':L1}, 400, "easeOutQuart");
                $($children[5]).animate({'left':L1}, 400, "easeOutQuart");
                $($children[9]).animate({'left':L1}, 400, "easeOutQuart");
                $($children[2]).animate({'left':L2}, 400, "easeOutQuart");
                $($children[6]).animate({'left':L2}, 400, "easeOutQuart");
                $($children[10]).animate({'left':L2}, 400, "easeOutQuart");
                $($children[3]).animate({'left':L3}, 800, "easeOutQuart");
                $($children[7]).animate({'left':L3}, 800, "easeOutQuart");
                $($children[11]).animate({'left':L3}, 800, "easeOutQuart");
            }
            
            /* ===============================
             *  Communication
             * =============================== */
            function send(msg) {
                $.get('http://localhost:9000/?u=touchscreen&c=1&q=touchscreen&m='+msg);
            }
        
            /* ===============================
             *  menu navigation
             * =============================== */
            var breadcrumbs = new Array();
            var reset_timer = undefined;
            var inactivity_timeout = 60000;
            var submenu_colors = {
                'osl':'#E55E00',
                'osl_network_graphs':'#E55E00',
                'webcams':'#7533EF',
                'network':'#EF3333',
                'mainmenu':'#000000'
            }
            
            function activity() {
                if (reset_timer != undefined) {
                    clearTimeout(reset);
                }
                reset_timer = setTimeout(reset, inactivity_timeout);
            }
            
            function reset() {
                reset_timer = undefined;
                if (breadcrumbs.length == 1) {return;}
                send('slideshow,play');
                // hide current menu
                hide(breadcrumbs.pop());
                // pop all other menus off the breadcrumbs
                while (breadcrumbs.length > 1) {
                    breadcrumbs.pop()
                }
                
                // show main menu
                setTimeout(function(){
                    $menu = breadcrumbs[0];
                    $('#status_color')
                        .css('background-color', submenu_colors[$menu.attr('id')])
                        .fadeIn(500);
                    $('#status_text').html($menu.attr('title'));
                    Cufon.replace('#status_text', {
                        textShadow: '1px 1px rgba(0, 0, 0, 0.8)'
                    });
                }, 350)
                setTimeout(show, 900, breadcrumbs[0]);
            }
            
            function submenu(menu_name) {
                activity();
                // hide old info
                hide(breadcrumbs[breadcrumbs.length-1]);
                $menu = $('#'+menu_name);
                $('#status_color').fadeOut(300)
                // delay new status bar info till old info is hidden
                setTimeout(function(){
                    $('#status_color')
                        .css('background-color', submenu_colors[menu_name])
                        .fadeIn(500);
                    $('#status_text').html($menu.attr('title'));
                    Cufon.replace('#status_text', {
                        textShadow: '1px 1px rgba(0, 0, 0, 0.8)'
                    });
                }, 350)
                breadcrumbs.push($menu);
                setTimeout(show, 900, $menu);
            }
        
            function back() {
                activity();
                // prevent mainmenu from being popped off
                if (breadcrumbs.length == 1){
                    return;
                }
                // hide old info
                $menu = breadcrumbs.pop();
                hide($menu);
                $new_menu = breadcrumbs[breadcrumbs.length-1]
                $('#status_color').fadeOut(300)
                // delay new status bar info till old info is hidden
                setTimeout(function(){
                    $('#status_color')
                        .css('background-color', submenu_colors[$new_menu.attr('id')])
                        .fadeIn(500);
                    $('#status_text').html($new_menu.attr('title'));
                    Cufon.replace('#status_text', {
                        textShadow: '1px 1px rgba(0, 0, 0, 0.8)'
                    });
                }, 350)
                setTimeout(show, 900, $new_menu);
            }
            
            /* ===============================
             *  Initialization
             * =============================== */
            $(document).ready(function()
            {
                Cufon.replace('.button .text', {
                        textShadow: '1px 1px rgba(0, 0, 0, 0.8)'
                    });
                
                Cufon.replace('#status_text', {
                        textShadow: '1px 1px rgba(0, 0, 0, 0.8)'
                    });
                
                $('#menus').children().each(function(){
                    init($(this));
                    hide($(this));
                });
                
                $('#back').click(back);
                
                $mainmenu = $('#mainmenu')
                breadcrumbs.push($mainmenu);
                $mainmenu.delay(800).each(function(){show($(this))});
            });
        </script>
    </head>
    <body>
        <div id="header">
            <img src="{{MEDIA}}/images/osl_logo.png"/>
            <div id="slideshow">
                <div>Slideshow</div>
                <img id="prev" src="{{MEDIA}}/images/menu/buttons/prevSlide.gif" onclick="send('slideshow,prev');"/>
                <img id="stop" src="{{MEDIA}}/images/menu/buttons/stop.gif" onclick="send('slideshow,stop');"/>
                <img id="play" src="{{MEDIA}}/images/menu/buttons/play.gif" onclick="send('slideshow,play');"/>
                <img id="next" src="{{MEDIA}}/images/menu/buttons/nextSlide.gif" onclick="send('slideshow,next');"/>
            </div>
        </div>
        <div id="status"><div id="status_color"></div><div id="status_text">Main Menu</div></div>
        <div id="center"></div>
        <div id="back">Back</div>
        <div id="menus">
            
            <div id="mainmenu" title="Main Menu">
                <div class="button button_orange" onclick="submenu('osl');"><div class="text">Open Source Lab</div></div>
                <div class="button button_red" onclick="submenu('network');"><div class="text">Network Engineering</div></div>
                <div class="button button_blue"><div class="text">Data Center Map</div></div>
                <div class="button button_purple" onclick="submenu('webcams');send('slideshow,show,Webcams');"><div class="text">Webcams</div></div>
                <div class="button button_yellow" onclick="send('slideshow,show,Weather');"><div class="text">Weather</div></div>
                <div class="button button_green"><div class="text">Help</div></div>
            </div>
            
            <div id="osl" title="Open Source Lab">
                <div class="button button_orange" onclick="submenu('osl_network_graphs'); send('slideshow,show,OSLBandwidth');"><div class="text">Network Graphs</div></div>
                <div class="button button_red" onclick="send('slideshow,show,FTP_Traffic');"><div class="text">FTP Status</div></div>
                <div class="button button_blue" onclick="send('slideshow,show,FTP_Users_Map');"><div class="text">FTP Users Map</div></div>
                <div class="button button_green"><div class="text">Outages</div></div>
                <div class="button button_orange" onclick="send('slideshow,show,OSL_About');"><div class="text">About</div></div>
                <div class="button button_red" onclick="send('slideshow,show,OSLPeopleScreen');"><div class="text">People</div></div>
                <div class="button button_blue" onclick="send('slideshow,show,OSL_Donors');"><div class="text">Sponsors</div></div>
                <div class="button button_green"><div class="text">Help</div></div>
            </div>
            
            <div id="osl_network_graphs" title="OSL Network Graphs">
                <div class="button button_orange" onclick="send('screens_osl_bandwidth,show,OSL Services');"><div class="text">Open Source Lab Services</div></div>
                <div class="button button_red" onclick="send('screens_osl_bandwidth,show,Apache');"><div class="text">Apache</div></div>
                <div class="button button_blue" onclick="send('screens_osl_bandwidth,show,Gentoo');"><div class="text">Gentoo</div></div>
                <div class="button button_purple" onclick="send('screens_osl_bandwidth,show,Kernel.org');"><div class="text">Kernel .org</div></div>
                <div class="button button_yellow" onclick="send('screens_osl_bandwidth,show,OpenOffice.org');"><div class="text">OpenOffice. org</div></div>
                <div class="button button_green" onclick="send('screens_osl_bandwidth,show,Mozilla');"><div class="text">Mozilla</div></div>
            </div>
            
            <div id="webcams" title="Webcams">
                <div class="button button_orange" onclick="send('Webcams,show,Valley Library');"><div class="text">Valley Library</div></div>
                <div class="button button_blue" onclick="send('Webcams,show,Reser Stadium');"><div class="text">Reser Stadium</div></div>
                <div class="button button_red" onclick="send('Webcams,show,Memorial Union');"><div class="text">Memorial Union</div></div>
                <div class="button button_yellow" onclick="send('Webcams,show,Monroe Street');"><div class="text">Monroe Street</div></div>
                <div class="button button_orange" onclick="send('Webcams,show,South Campus');"><div class="text">South Campus</div></div>
                <div class="button button_blue" onclick="send('Webcams,show,Goss Stadium');"><div class="text">Goss Stadium</div></div>
                <div class="button button_red" onclick="send('Webcams,show,Wave Lab');"><div class="text">Wave Lab</div></div>
                <div class="button button_yellow" onclick="send('Webcams,show,Gill Annex');"><div class="text">Gill Annex</div></div>
                <div class="button button_orange" onclick="send('Webcams,show,Andrews Forrest');"><div class="text">Andrews Forrest</div></div>
                <div class="button button_blue" onclick="send('Webcams,show,Hatfield Marine Science');"><div class="text">Hatfield Marine Science</div></div>
                <div class="button button_red" onclick="send('Webcams,show,Agate Beach');"><div class="text">Agate Beach</div></div>
                <div class="button button_yellow" onclick="send('Webcams,show,Research Vessel Wecoma');"><div class="text">Research Vessel Wecoma</div></div>
            </div>
            
            <div id="network" title="Network Engineering">
                <div class="button button_orange"><div class="text">People</div></div>
                <div class="button button_red"><div class="text">Traffic Graphs</div></div>
                <div class="button button_blue" onclick="send('slideshow,show,WifiBandwidth');"><div class="text">Wifi Usage Map</div></div>
                <div class="button button_purple" onclick="send('slideshow,show,WifiUsage');"><div class="text">Wifi Bandwidth Map</div></div>
            </div>
            
            
            
        </div>
    </body>
</html>
